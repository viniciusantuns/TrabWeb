<app-navbar-funcionario></app-navbar-funcionario>
<div class="pendentes">
  <!-- <select id="st_pedidos" class="form-select mb-4"> -->
  <select id="st_pedidos" #st="ngModel" [(ngModel)]="type" (ngModelChange)="listarPedidos()" class="form-select mb-4">
    <option selected value="todos">Todos</option>
    <option value="hoje" type="Data">Pedidos de Hoje</option>
    <option value="data" type="Data">Por Data</option>
  </select>

  <div *ngIf="type === 'data'">
    <input id="inicio" class="data_inicio" type="date" [(ngModel)]="dataInicio" (ngModelChange)="verificarCamposData()">
    <label placeholder="Data Inicio" for="datainicio"></label>
    <input id="fim" class="data_fim" type="date" [(ngModel)]="dataFim" (ngModelChange)="verificarCamposData()">
    <label placeholder="Data Fim" for="datafim"></label>
  </div>

  <div class="container">
    <div class="table-wrap">
      <table nome="tabelap" class="table" id="tabelap">
        <thead>
          <tr>
            <th scope="col">Pedido</th>
            <th scope="col">Data</th>
            <th scope="col">Valor</th>
            <th scope="col">Status</th>
            <th scope="col">Ações</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let pedido of pedidos"  >
            <td> {{pedido.id}}</td>
            <td> {{pedido.data_pedido}} </td>
            <td> {{pedido.valorTotal}}</td>
            <td> {{pedido.status}}</td>
            <td> <button *ngIf="pedido.status === 'Pago'" (click)="atualizarPedido(pedido, 'Finalizado')">Finalizar Pedido</button>
                  <button *ngIf="pedido.status === 'Em Aberto'" (click)="atualizarPedido(pedido, 'Recolhido')">Informar Recolhimento</button>
                  <button *ngIf="pedido.status === 'Recolhido'" (click)="atualizarPedido(pedido, 'Aguardando Pagamento')" >Realizar Ação</button>
            </td>
          </tr>
        </tbody>

      </table>
    </div>
  </div>
</div>